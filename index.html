<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>BET300 ¬∑ Bono de bienvenida</title>
<meta name="theme-color" content="#0b1026"/>
<style>
:root{
  --bg:#0b1026;         /* azul oscuro */
  --panel:#0e1635;      /* panel azul + profundo */
  --panel2:#0a122f;
  --border:#1a2552;
  --text:#eaf0ff;
  --muted:#a8b1db;
  --accent:#7c4dff;     /* violeta */
  --turq:#22d3ee;       /* cian */
  --ok:#25D366;         /* whatsapp */
  --cta:#2ee06d;        /* bot√≥n registro */
  --pill:#ffb873;       /* naranja suave */
  --pill2:#ffd7a6;      /* beige/anaranjado */
  --grad1:linear-gradient(135deg, rgba(124,77,255,.24), rgba(34,211,238,.18));
  --grad2:linear-gradient(90deg, #7c59ff, #00d1ff);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:radial-gradient(900px 500px at 80% -10%, rgba(124,77,255,.18), transparent),
           radial-gradient(700px 400px at 0% 0%, rgba(34,211,238,.12), transparent),
           var(--bg);
  color:var(--text);font:16px/1.35 system-ui,-apple-system,Segoe UI,Roboto;
}
.container{max-width:1100px;margin:18px auto 100px;padding:0 12px}
.brandRow{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.logo{display:inline-grid;place-items:center;width:42px;height:42px;border-radius:12px;
  background:radial-gradient(100% 100% at 50% 0%, #21306b,#0c1538);
  color:#9bd0ff;font-weight:900;letter-spacing:.5px;border:1px solid #1e2a63;box-shadow:0 10px 25px rgba(0,0,0,.35)}
.brand{font-weight:900;letter-spacing:.5px;font-size:22px}
.pill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;
  color:#161b2e;background:linear-gradient(180deg,var(--pill),var(--pill2));font-weight:800;border:1px solid rgba(255,255,255,.06)}
.badgeClock{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;
  background:rgba(255,255,255,.06);border:1px solid var(--border);color:var(--muted);font-weight:700}
.headerRight{margin-left:auto;display:flex;gap:10px;flex-wrap:wrap}

.grid{display:grid;grid-template-columns:1.1fr .9fr;gap:12px}
@media(max-width:920px){.grid{grid-template-columns:1fr;gap:10px}}

.card{background:var(--panel);border:1px solid var(--border);border-radius:18px;padding:12px;box-shadow:0 15px 40px rgba(0,0,0,.35)}
h1,h2,h3,p{margin:0 0 8px}
h1{font-size:22px}
h2{font-size:20px}
.muted{color:var(--muted)}

.wheelBox{position:relative;border:1px solid #202b65;border-radius:16px;background:var(--panel2);padding:10px}
.halfWheel{
  aspect-ratio: 2/1; width:100%;
  background:
   conic-gradient(from 200deg, #c0b0ff 0 50%, #ffd7a6 50% 75%, #c0b0ff 75% 100%);
  border-radius:999px 999px 0 0 / 85% 85% 0 0;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.05), 0 10px 30px rgba(0,0,0,.35);
  position:relative;overflow:hidden;
}
.marker{
  position:absolute;left:50%;top:4px;transform:translateX(-50%);
  width:0;height:0;border-left:12px solid transparent;border-right:12px solid transparent;border-bottom:18px solid #ffae55;filter:drop-shadow(0 4px 6px rgba(0,0,0,.35))
}
.segLabel{
  position:absolute;left:50%;transform:translateX(-50%);font-weight:900;filter:drop-shadow(0 1px 0 rgba(0,0,0,.45));text-shadow:0 0 12px rgba(0,0,0,.5)
}
.lab10{top:55%;font-size:18px}
.lab20{top:38%;left:43%;font-size:18px;transform:none}
.lab30{top:47%;left:64%;font-size:18px;transform:none}

.actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.btn{
  appearance:none;border:none;cursor:pointer;padding:12px 14px;border-radius:14px;font-weight:900;
  background:linear-gradient(180deg,#ffb873,#ff9755);color:#1a1427;border:1px solid rgba(255,255,255,.06);
  box-shadow:0 10px 24px rgba(0,0,0,.35)
}
.btn.secondary{background:rgba(255,255,255,.06);color:var(--text);border:1px solid var(--border)}
.btn.cta{background:var(--cta);color:#0b0f1f}
.btn.wa{background:var(--ok);color:#0b0f1e}
.btn:disabled{opacity:.6;cursor:not-allowed}

.resultTag{
  display:inline-grid;place-items:center;min-width:150px;height:46px;padding:0 14px;border-radius:12px;
  background:var(--grad2);color:#061228;font-weight:900;border:1px solid rgba(255,255,255,.06)
}
.panelInfo{background:var(--panel2);border:1px solid var(--border);border-radius:14px;padding:10px}

.kv{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:8px}
.k{color:var(--muted)} .v{font-weight:800}

.fixedDock{position:fixed;left:0;right:0;bottom:0;z-index:30;background:
  linear-gradient(180deg, rgba(12,15,30,0) 0%, rgba(12,15,30,.85) 22%, rgba(12,15,30,.95) 100%);
  padding:8px 10px 10px;display:flex;gap:8px}
@media(min-width:860px){.fixedDock{display:none}}

.small{font-size:12px}
.hr{height:1px;background:rgba(255,255,255,.06);margin:8px 0}

/* Chips arriba del bot√≥n registrar */
.inlineHelps{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 4px}
.chip{display:inline-flex;gap:8px;align-items:center;padding:6px 8px;border-radius:10px;background:rgba(255,255,255,.06);border:1px solid var(--border);color:var(--muted);font-weight:700}
</style>
</head>
<body>
  <div class="container">
    <div class="brandRow">
      <div class="logo">B3</div>
      <div class="brand">BET300</div>
      <span class="pill">Plataforma renovada ¬∑ Autogesti√≥n</span>
      <span class="badgeClock" id="clock">‚Äî</span>
      <div class="headerRight">
        <a id="platformTop" class="btn" target="_blank" rel="noopener">üéÆ Entrar a la plataforma</a>
        <a id="whTop" class="btn wa" target="_blank" rel="noopener">üü¢ WhatsApp</a>
      </div>
    </div>

    <div class="grid">
      <!-- IZQUIERDA -->
      <div class="card">
        <h1>Eleg√≠ tu beneficio de bienvenida</h1>
        <p class="muted">Giramos la <b>media ruleta</b> y te asignamos <b>extra</b> en tu primera carga.</p>
        <div class="wheelBox" style="margin-top:8px">
          <div class="halfWheel" id="halfWheel">
            <div class="marker"></div>
            <div class="segLabel lab10">10% EXTRA</div>
            <div class="segLabel lab20">20% EXTRA</div>
            <div class="segLabel lab30">30% EXTRA</div>
          </div>
          <div class="actions">
            <button id="spinBtn" class="btn">üéØ Asignar beneficio</button>
            <button id="termsBtn" class="btn secondary">‚ÑπÔ∏è Condiciones</button>
            <a id="videoBtn" class="btn secondary" target="_blank" rel="noopener" style="display:none">‚ñ∂Ô∏è Ver video explicativo</a>
          </div>
        </div>
      </div>

      <!-- DERECHA -->
      <div class="card">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
          <div class="resultTag" id="resultTag">‚Äî</div>
          <h2 id="resultTitle">Ten√©s 1 intento disponible</h2>
        </div>
        <p class="muted">El beneficio se aplica a tu <b>primera carga</b> en la plataforma.</p>

        <div class="panelInfo" style="margin-top:8px">
          <div class="k">Resultado actual</div>
          <div id="resultBox" class="v">‚Äî</div>
          <div class="kv"><span class="k">C√≥digo:</span><span class="v" id="code">‚Äî</span> <span class="k">¬∑</span> <span class="v" id="ts">‚Äî</span></div>
        </div>

        <div class="inlineHelps">
          <span class="chip">üí¨ Soporte en vivo 24 hs dentro de la plataforma</span>
          <span class="chip">üîí Autogesti√≥n: cargas y retiros</span>
        </div>

        <div class="actions" style="margin-top:8px">
          <a id="regBtn" class="btn cta" target="_blank" rel="noopener">üéÅ REGISTRATE PARA RECLAMAR</a>
          <a id="whBtn" class="btn wa" target="_blank" rel="noopener">üü¢ WhatsApp (opcional)</a>
        </div>
      </div>
    </div>
  </div>

  <!-- DOCK MOBILE -->
  <div class="fixedDock">
    <button id="spinBtnBottom" class="btn" style="flex:1">üéØ Asignar</button>
    <a id="platformBottom" class="btn" style="flex:1" target="_blank" rel="noopener">üåê Plataforma</a>
    <a id="regBottom" class="btn cta" style="flex:1" target="_blank" rel="noopener">üéÅ Registrar</a>
  </div>

<script>
/* ====== Par√°metros ====== */
const params = new URLSearchParams(location.search);
const pcParam = (params.get("pc") || "1").trim();
const pc = (pcParam.match(/^[1-4]$/) ? pcParam : "1");

const REG_LINK = params.get("reg") || "https://bet300.biz/registro"; // <-- pon√© tu URL fina de registro
const PLATFORM_LINK = "https://bet300.biz";                           // <-- home/plataforma

// video externo opcional:
const VIDEO_URL = params.get("video") || "";

// WhatsApp por PC:
const WHATS = {
  "1": "54911171561685",
  "2": "54911171561022",
  "3": "54911171331067",
  "4": "549111135854862"
};
const WH = WHATS[pc] || WHATS["1"];

/* ====== UI ====== */
const spinBtn = document.getElementById('spinBtn');
const spinBtnBottom = document.getElementById('spinBtnBottom');
const resultTag = document.getElementById('resultTag');
const resultTitle = document.getElementById('resultTitle');
const resultBox = document.getElementById('resultBox');
const codeEl = document.getElementById('code');
const tsEl = document.getElementById('ts');
const termsBtn = document.getElementById('termsBtn');
const videoBtn = document.getElementById('videoBtn');

const regBtn = document.getElementById('regBtn');
const regBottom = document.getElementById('regBottom');
const platformTop = document.getElementById('platformTop');
const platformBottom = document.getElementById('platformBottom');
const whBtn = document.getElementById('whBtn');
const whTop = document.getElementById('whTop');
const clock = document.getElementById('clock');

/* ====== Set links ====== */
function setLinks(){
  const regUrl = `${REG_LINK}?src=landing&pc=${pc}`;
  const platUrl = `${PLATFORM_LINK}?pc=${pc}`;
  regBtn.href = regUrl;
  regBottom.href = regUrl;
  platformTop.href = platUrl;
  platformBottom.href = platUrl;

  const msg = encodeURIComponent(
    "Hola, quiero registrarme en BET300 para reclamar el beneficio de bienvenida y hacer mi primera carga."
  );
  const wa = `https://wa.me/${WH}?text=${msg}`;
  whBtn.href = wa; whTop.href = wa;

  if (VIDEO_URL){
    videoBtn.href = VIDEO_URL;
    videoBtn.style.display = "inline-flex";
  }
}
setLinks();

/* ====== Reloj simple ====== */
function tick(){
  const n=new Date();
  const hh=String(n.getHours()).padStart(2,'0');
  const mm=String(n.getMinutes()).padStart(2,'0');
  const ss=String(n.getSeconds()).padStart(2,'0');
  clock.textContent = `üïí ${hh}:${mm}:${ss}`;
}
tick(); setInterval(tick,1000);

/* ====== Utilidades ====== */
function tsString(d=new Date()){
  const dd=String(d.getDate()).padStart(2,'0'),mm=String(d.getMonth()+1).padStart(2,'0'),yyyy=d.getFullYear();
  const hh=String(d.getHours()).padStart(2,'0'),mi=String(d.getMinutes()).padStart(2,'0');
  return `${dd}/${mm}/${yyyy} ${hh}:${mi}`;
}
async function sha256hex(msg){
  const enc = new TextEncoder().encode(msg);
  const buf = await crypto.subtle.digest("SHA-256", enc);
  return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,"0")).join("");
}
const SALT="bet300-welcome-v1";
function ensureDeviceId(){
  let id = localStorage.getItem('b3_device');
  if(!id){ id = (crypto.randomUUID?.() || `${Date.now()}-${Math.random().toString(36).slice(2,8)}`); localStorage.setItem('b3_device', id); }
  return id;
}
const DEVICE_ID = ensureDeviceId();

/* ====== Sorteo (ponderado) ====== */
// 10% (50%), 20% (35%), 30% (15%)
function pickBonus(){
  const r = Math.random();
  if(r < 0.50) return 10;
  if(r < 0.85) return 20;
  return 30;
}

/* ====== LOG local ====== */
function logEvent(kind, data){
  const key='b3_welcome_log';
  const arr = JSON.parse(localStorage.getItem(key) || '[]');
  arr.unshift({ts: Date.now(), kind, data});
  localStorage.setItem(key, JSON.stringify(arr.slice(0,100)));
}

/* ====== Asignaci√≥n ====== */
let used = false;
async function assign(){
  if(used){ alert("Ya asignaste tu beneficio. Registrate para reclamarlo."); return; }
  used = true;
  spinBtn.disabled = true; spinBtnBottom.disabled = true;

  // ‚Äúanimaci√≥n‚Äù suave del marcador (simulada)
  resultTitle.textContent = "Asignando beneficio‚Ä¶";
  await new Promise(r=>setTimeout(r, 450));

  const bonus = pickBonus();
  const label = `${bonus}% EXTRA`;
  const codeBase = `${DEVICE_ID}|${label}|${SALT}|pc:${pc}`;
  const code = (await sha256hex(codeBase)).slice(0,8).toUpperCase();
  const ts = tsString();

  // Persistir
  localStorage.setItem('b3_welcome_bonus', String(bonus));
  localStorage.setItem('b3_welcome_code', code);
  localStorage.setItem('b3_welcome_ts', ts);

  // Log
  logEvent('ASSIGN', {bonus, code, pc});

  // UI
  resultTag.textContent = label;
  resultTitle.textContent = "üéâ Beneficio asignado";
  resultBox.textContent = `Resultado: ${label}. Registrate y hac√© tu primera carga para aplicarlo.`;
  codeEl.textContent = code;
  tsEl.textContent = ts;
}

/* ====== Restituci√≥n diaria opcional ====== */
(function daily(){
  const today = new Date(); const tkey = `${today.getFullYear()}-${today.getMonth()+1}-${today.getDate()}`;
  const stored = localStorage.getItem('b3_welcome_day');
  if(stored !== tkey){
    localStorage.removeItem('b3_welcome_bonus');
    localStorage.removeItem('b3_welcome_code');
    localStorage.removeItem('b3_welcome_ts');
    localStorage.setItem('b3_welcome_day', tkey);
  }
})();

/* ====== Restaurar si ya asign√≥ ====== */
(function restore(){
  const b = localStorage.getItem('b3_welcome_bonus');
  const c = localStorage.getItem('b3_welcome_code');
  const t = localStorage.getItem('b3_welcome_ts');
  if(b && c && t){
    used = true; spinBtn.disabled = true; spinBtnBottom.disabled = true;
    const label = `${b}% EXTRA`;
    resultTag.textContent = label;
    resultTitle.textContent = "üéâ Beneficio asignado";
    resultBox.textContent = `Resultado: ${label}. Registrate y hac√© tu primera carga para aplicarlo.`;
    codeEl.textContent = c; tsEl.textContent = t;
  }
})();

/* ====== Eventos ====== */
spinBtn.addEventListener('click', assign);
spinBtnBottom.addEventListener('click', assign);
termsBtn.addEventListener('click', ()=>{
  alert("Condiciones:\n\n‚Ä¢ V√°lido solo para usuarios nuevos.\n‚Ä¢ El beneficio aplica en la primera carga efectuada en la plataforma dentro de las 24 hs.\n‚Ä¢ No acumulable con otras promos.\n‚Ä¢ BET300 puede modificar/pausar la promo sin previo aviso.");
});
</script>
</body>
</html>
